/***********************************************************************/
/******************* This file is generated by *************************/
/******************* the Compose Generator *****************************/
/***********************************************************************/

#ifndef __COMPOSE_H__
#define __COMPOSE_H__

#include "NeoIncludes.h"
#include <assert.h>

/*
 * The tree is static, therefore no methods for removing/adding elements,
 * to not make life too complicated, this file is generated by a script.
 * 
 * The implementation with bit fields and unions is not the most pretty one
 * but the most memory efficient.
 * 
 * Payload is either pointing to next node or contains unicode symbol.
 * indication what is inside is given by the isLeaf flag cast to uint16_t
 * in Initialization only to trick the compiler, as only first element of the
 * union can be initialized. 
*/

struct LayeredKey {
	uint8_t layer;
	uint8_t key;
};

struct Node {
	struct {
		uint8_t isLastElement : 1;
		uint8_t isLeaf : 1;
		uint8_t layer : 6;
		uint8_t keycode : 8;
	} layeredKey;
	union {
		uint16_t unicode;
		Node* nodes;
	} payload;
};


class Compose
{
	private:
	Node* currentNode;

	const static Node root[] PROGMEM;
	const static Node NODE_1442598261040[] PROGMEM;
	const static Node NODE_1442598553376[] PROGMEM;
	const static Node NODE_1442598662688[] PROGMEM;
	const static Node NODE_1442598662848[] PROGMEM;
	const static Node NODE_1442598766848[] PROGMEM;
	const static Node NODE_1442598767008[] PROGMEM;
	const static Node NODE_1442598786608[] PROGMEM;
	const static Node NODE_1442598786928[] PROGMEM;
	const static Node NODE_1442598787408[] PROGMEM;
	const static Node NODE_1442598787728[] PROGMEM;
	const static Node NODE_1442598787968[] PROGMEM;
	const static Node NODE_1442598788128[] PROGMEM;
	const static Node NODE_1442598788208[] PROGMEM;
	const static Node NODE_1442598801872[] PROGMEM;
	const static Node NODE_1442598802032[] PROGMEM;
	const static Node NODE_1442598802592[] PROGMEM;
	const static Node NODE_1442598803312[] PROGMEM;
	const static Node NODE_1442598803632[] PROGMEM;
	const static Node NODE_1442598803792[] PROGMEM;
	const static Node NODE_1442598766928[] PROGMEM;
	const static Node NODE_1442598801632[] PROGMEM;
	const static Node NODE_1442598802112[] PROGMEM;
	const static Node NODE_1442598786768[] PROGMEM;
	const static Node NODE_1442598801792[] PROGMEM;
	const static Node NODE_1442598787568[] PROGMEM;
	const static Node NODE_1442598804432[] PROGMEM;
	const static Node NODE_1442598804752[] PROGMEM;
	const static Node NODE_1442598802432[] PROGMEM;
	const static Node NODE_1442598260960[] PROGMEM;
	const static Node NODE_1442598322320[] PROGMEM;
	const static Node NODE_1442598322560[] PROGMEM;
	const static Node NODE_1442598322720[] PROGMEM;
	const static Node NODE_1442598727488[] PROGMEM;
	const static Node NODE_1442598727568[] PROGMEM;
	const static Node NODE_1442598480688[] PROGMEM;
	const static Node NODE_1442598260880[] PROGMEM;
	const static Node NODE_1442598519248[] PROGMEM;
	const static Node NODE_1442598554736[] PROGMEM;
	const static Node NODE_1442598261280[] PROGMEM;
	const static Node NODE_1442590562640[] PROGMEM;
	const static Node NODE_1442598303840[] PROGMEM;
	const static Node NODE_1442598304000[] PROGMEM;
	const static Node NODE_1442598304080[] PROGMEM;
	const static Node NODE_1442598480448[] PROGMEM;
	const static Node NODE_1442598495312[] PROGMEM;
	const static Node NODE_1442598497392[] PROGMEM;
	const static Node NODE_1442598519008[] PROGMEM;
	const static Node NODE_1442598522048[] PROGMEM;
	const static Node NODE_1442598552576[] PROGMEM;
	const static Node NODE_1442598553616[] PROGMEM;
	const static Node NODE_1442598582288[] PROGMEM;
	const static Node NODE_1442598602128[] PROGMEM;
	const static Node NODE_1442598602288[] PROGMEM;
	const static Node NODE_1442598261600[] PROGMEM;
	const static Node NODE_1442598481248[] PROGMEM;
	const static Node NODE_1442598498112[] PROGMEM;
	const static Node NODE_1442598552496[] PROGMEM;
	const static Node NODE_1442598554016[] PROGMEM;
	const static Node NODE_1442598582608[] PROGMEM;
	const static Node NODE_1442598601888[] PROGMEM;
	const static Node NODE_1442598601968[] PROGMEM;
	const static Node NODE_1442598261840[] PROGMEM;
	const static Node NODE_1442598262080[] PROGMEM;
	const static Node NODE_1442598262160[] PROGMEM;
	const static Node NODE_1442598263760[] PROGMEM;
	const static Node NODE_1442598281600[] PROGMEM;
	const static Node NODE_1442598390256[] PROGMEM;
	const static Node NODE_1442598390576[] PROGMEM;
	const static Node NODE_1442598391296[] PROGMEM;
	const static Node NODE_1442598391216[] PROGMEM;
	const static Node NODE_1442598391616[] PROGMEM;
	const static Node NODE_1442598727408[] PROGMEM;
	const static Node NODE_1442598744208[] PROGMEM;
	const static Node NODE_1442598747328[] PROGMEM;
	const static Node NODE_1442598766208[] PROGMEM;
	const static Node NODE_1442598804672[] PROGMEM;
	const static Node NODE_1442599038864[] PROGMEM;
	const static Node NODE_1442598767488[] PROGMEM;
	const static Node NODE_1442598767728[] PROGMEM;
	const static Node NODE_1442598767968[] PROGMEM;
	const static Node NODE_1442598956384[] PROGMEM;
	const static Node NODE_1442598262000[] PROGMEM;
	const static Node NODE_1442598536432[] PROGMEM;
	const static Node NODE_1442598536672[] PROGMEM;
	const static Node NODE_1442598862992[] PROGMEM;
	const static Node NODE_1442598863152[] PROGMEM;
	const static Node NODE_1442598262320[] PROGMEM;
	const static Node NODE_1442598848448[] PROGMEM;
	const static Node NODE_1442598848848[] PROGMEM;
	const static Node NODE_1442598973008[] PROGMEM;
	const static Node NODE_1442598262480[] PROGMEM;
	const static Node NODE_1442598553136[] PROGMEM;
	const static Node NODE_1442598554496[] PROGMEM;
	const static Node NODE_1442598583088[] PROGMEM;
	const static Node NODE_1442598602448[] PROGMEM;
	const static Node NODE_1442598602608[] PROGMEM;
	const static Node NODE_1442598620592[] PROGMEM;
	const static Node NODE_1442598972608[] PROGMEM;
	const static Node NODE_1442598262640[] PROGMEM;
	const static Node NODE_1442598284720[] PROGMEM;
	const static Node NODE_1442598303520[] PROGMEM;
	const static Node NODE_1442598303760[] PROGMEM;
	const static Node NODE_1442598303600[] PROGMEM;
	const static Node NODE_1442598479888[] PROGMEM;
	const static Node NODE_1442598481808[] PROGMEM;
	const static Node NODE_1442598496272[] PROGMEM;
	const static Node NODE_1442598521088[] PROGMEM;
	const static Node NODE_1442599037744[] PROGMEM;
	const static Node NODE_1442598263040[] PROGMEM;
	const static Node NODE_1442598522368[] PROGMEM;
	const static Node NODE_1442598537392[] PROGMEM;
	const static Node NODE_1442598263200[] PROGMEM;
	const static Node NODE_1442598495712[] PROGMEM;
	const static Node NODE_1442598711024[] PROGMEM;
	const static Node NODE_1442598711184[] PROGMEM;
	const static Node NODE_1442598726928[] PROGMEM;
	const static Node NODE_1442598747248[] PROGMEM;
	const static Node NODE_1442598933184[] PROGMEM;
	const static Node NODE_1442598934464[] PROGMEM;
	const static Node NODE_1442598934704[] PROGMEM;
	const static Node NODE_1442598934864[] PROGMEM;
	const static Node NODE_1442598935104[] PROGMEM;
	const static Node NODE_1442598935264[] PROGMEM;
	const static Node NODE_1442598724048[] PROGMEM;
	const static Node NODE_1442598725008[] PROGMEM;
	const static Node NODE_1442598747008[] PROGMEM;
	const static Node NODE_1442598747568[] PROGMEM;
	const static Node NODE_1442598747808[] PROGMEM;
	const static Node NODE_1442598263520[] PROGMEM;
	const static Node NODE_1442598263440[] PROGMEM;
	const static Node NODE_1442598552896[] PROGMEM;
	const static Node NODE_1442598554256[] PROGMEM;
	const static Node NODE_1442598582848[] PROGMEM;
	const static Node NODE_1442598804912[] PROGMEM;
	const static Node NODE_1442598263360[] PROGMEM;
	const static Node NODE_1442598805072[] PROGMEM;
	const static Node NODE_1442598805392[] PROGMEM;
	const static Node NODE_1442598263920[] PROGMEM;
	const static Node NODE_1442598680192[] PROGMEM;
	const static Node NODE_1442598680512[] PROGMEM;
	const static Node NODE_1442598707744[] PROGMEM;
	const static Node NODE_1442598955904[] PROGMEM;
	const static Node NODE_1442598956144[] PROGMEM;
	const static Node NODE_1442598956464[] PROGMEM;
	const static Node NODE_1442598956624[] PROGMEM;
	const static Node NODE_1442598708624[] PROGMEM;
	const static Node NODE_1442598724128[] PROGMEM;
	const static Node NODE_1442598264160[] PROGMEM;
	const static Node NODE_1442598583328[] PROGMEM;
	const static Node NODE_1442598264480[] PROGMEM;
	const static Node NODE_1442598264560[] PROGMEM;
	const static Node NODE_1442598387856[] PROGMEM;
	const static Node NODE_1442598848688[] PROGMEM;
	const static Node NODE_1442598849008[] PROGMEM;
	const static Node NODE_1442598264320[] PROGMEM;
	const static Node NODE_1442598326080[] PROGMEM;
	const static Node NODE_1442598969648[] PROGMEM;
	const static Node NODE_1442598969888[] PROGMEM;
	const static Node NODE_1442598970128[] PROGMEM;
	const static Node NODE_1442598970208[] PROGMEM;
	const static Node NODE_1442598282880[] PROGMEM;
	const static Node NODE_1442598768288[] PROGMEM;
	const static Node NODE_1442598785568[] PROGMEM;
	const static Node NODE_1442598282560[] PROGMEM;
	const static Node NODE_1442590561760[] PROGMEM;
	const static Node NODE_1442598725248[] PROGMEM;
	const static Node NODE_1442598179840[] PROGMEM;
	const static Node NODE_1442598179680[] PROGMEM;
	const static Node NODE_1442598864832[] PROGMEM;
	const static Node NODE_1442599017344[] PROGMEM;
	const static Node NODE_1442598179600[] PROGMEM;
	const static Node NODE_1442598179280[] PROGMEM;
	const static Node NODE_1442598302160[] PROGMEM;
	const static Node NODE_1442598302320[] PROGMEM;
	const static Node NODE_1442598302400[] PROGMEM;
	const static Node NODE_1442598303200[] PROGMEM;
	const static Node NODE_1442598765248[] PROGMEM;
	const static Node NODE_1442598864992[] PROGMEM;
	const static Node NODE_1442598303120[] PROGMEM;
	const static Node NODE_1442598304240[] PROGMEM;
	const static Node NODE_1442598304560[] PROGMEM;
	const static Node NODE_1442598304880[] PROGMEM;
	const static Node NODE_1442598305120[] PROGMEM;
	const static Node NODE_1442598305520[] PROGMEM;
	const static Node NODE_1442598322240[] PROGMEM;
	const static Node NODE_1442598388016[] PROGMEM;
	const static Node NODE_1442598323120[] PROGMEM;
	const static Node NODE_1442598323360[] PROGMEM;
	const static Node NODE_1442598324480[] PROGMEM;
	const static Node NODE_1442598323600[] PROGMEM;
	const static Node NODE_1442598324720[] PROGMEM;
	const static Node NODE_1442598325040[] PROGMEM;
	const static Node NODE_1442598325200[] PROGMEM;
	const static Node NODE_1442598325120[] PROGMEM;
	const static Node NODE_1442598325360[] PROGMEM;
	const static Node NODE_1442598325520[] PROGMEM;
	const static Node NODE_1442598649424[] PROGMEM;
	const static Node NODE_1442598325680[] PROGMEM;
	const static Node NODE_1442598326160[] PROGMEM;
	const static Node NODE_1442598342880[] PROGMEM;
	const static Node NODE_1442598342800[] PROGMEM;
	const static Node NODE_1442598343200[] PROGMEM;
	const static Node NODE_1442598344080[] PROGMEM;
	const static Node NODE_1442598344240[] PROGMEM;
	const static Node NODE_1442598345520[] PROGMEM;
	const static Node NODE_1442598345600[] PROGMEM;
	const static Node NODE_1442598345920[] PROGMEM;
	const static Node NODE_1442598367616[] PROGMEM;
	const static Node NODE_1442598367856[] PROGMEM;
	const static Node NODE_1442598368016[] PROGMEM;
	const static Node NODE_1442598367936[] PROGMEM;
	const static Node NODE_1442598368176[] PROGMEM;
	const static Node NODE_1442598369296[] PROGMEM;
	const static Node NODE_1442598934144[] PROGMEM;
	const static Node NODE_1442598369616[] PROGMEM;
	const static Node NODE_1442598369696[] PROGMEM;
	const static Node NODE_1442598369456[] PROGMEM;
	const static Node NODE_1442598369856[] PROGMEM;
	const static Node NODE_1442598370016[] PROGMEM;
	const static Node NODE_1442598370336[] PROGMEM;
	const static Node NODE_1442598370416[] PROGMEM;
	const static Node NODE_1442598370816[] PROGMEM;
	const static Node NODE_1442598370896[] PROGMEM;
	const static Node NODE_1442598387776[] PROGMEM;
	const static Node NODE_1442598865152[] PROGMEM;
	const static Node NODE_1442598865392[] PROGMEM;
	const static Node NODE_1442599037344[] PROGMEM;
	const static Node NODE_1442598388416[] PROGMEM;
	const static Node NODE_1442598388496[] PROGMEM;
	const static Node NODE_1442598388656[] PROGMEM;
	const static Node NODE_1442598646384[] PROGMEM;
	const static Node NODE_1442598745568[] PROGMEM;
	const static Node NODE_1442598647424[] PROGMEM;
	const static Node NODE_1442598647824[] PROGMEM;
	const static Node NODE_1442598648704[] PROGMEM;
	const static Node NODE_1442598649104[] PROGMEM;
	const static Node NODE_1442598649744[] PROGMEM;
	const static Node NODE_1442598890368[] PROGMEM;
	const static Node NODE_1442598662528[] PROGMEM;
	const static Node NODE_1442598662768[] PROGMEM;
	const static Node NODE_1442598936064[] PROGMEM;
	const static Node NODE_1442598953104[] PROGMEM;
	const static Node NODE_1442598994384[] PROGMEM;
	const static Node NODE_1442598663888[] PROGMEM;
	const static Node NODE_1442599037984[] PROGMEM;
	const static Node NODE_1442599038144[] PROGMEM;
	const static Node NODE_1442599038064[] PROGMEM;
	const static Node NODE_1442598707264[] PROGMEM;
	const static Node NODE_1442598707984[] PROGMEM;
	const static Node NODE_1442598707824[] PROGMEM;
	const static Node NODE_1442598953184[] PROGMEM;
	const static Node NODE_1442598708784[] PROGMEM;
	const static Node NODE_1442598708944[] PROGMEM;
	const static Node NODE_1442598709504[] PROGMEM;
	const static Node NODE_1442598709584[] PROGMEM;
	const static Node NODE_1442598709904[] PROGMEM;
	const static Node NODE_1442598724608[] PROGMEM;
	const static Node NODE_1442598764848[] PROGMEM;
	const static Node NODE_1442598915664[] PROGMEM;
	const static Node NODE_1442598727168[] PROGMEM;
	const static Node NODE_1442598744688[] PROGMEM;
	const static Node NODE_1442598744848[] PROGMEM;
	const static Node NODE_1442598744928[] PROGMEM;
	const static Node NODE_1442598745408[] PROGMEM;
	const static Node NODE_1442598745488[] PROGMEM;
	const static Node NODE_1442598745968[] PROGMEM;
	const static Node NODE_1442598746128[] PROGMEM;
	const static Node NODE_1442598746288[] PROGMEM;
	const static Node NODE_1442598747728[] PROGMEM;
	const static Node NODE_1442598764688[] PROGMEM;
	const static Node NODE_1442598764928[] PROGMEM;
	const static Node NODE_1442598765088[] PROGMEM;
	const static Node NODE_1442598765568[] PROGMEM;
	const static Node NODE_1442598785808[] PROGMEM;
	const static Node NODE_1442598786048[] PROGMEM;
	const static Node NODE_1442598786448[] PROGMEM;
	const static Node NODE_1442598786128[] PROGMEM;
	const static Node NODE_1442598786528[] PROGMEM;
	const static Node NODE_1442598832304[] PROGMEM;
	const static Node NODE_1442598832624[] PROGMEM;
	const static Node NODE_1442598833984[] PROGMEM;
	const static Node NODE_1442598834064[] PROGMEM;
	const static Node NODE_1442598846768[] PROGMEM;
	const static Node NODE_1442598955024[] PROGMEM;
	const static Node NODE_1442598847088[] PROGMEM;
	const static Node NODE_1442598847168[] PROGMEM;
	const static Node NODE_1442598847728[] PROGMEM;
	const static Node NODE_1442598849408[] PROGMEM;
	const static Node NODE_1442598934544[] PROGMEM;
	const static Node NODE_1442598849968[] PROGMEM;
	const static Node NODE_1442598933904[] PROGMEM;
	const static Node NODE_1442598863952[] PROGMEM;
	const static Node NODE_1442598866112[] PROGMEM;
	const static Node NODE_1442598932944[] PROGMEM;
	const static Node NODE_1442598887568[] PROGMEM;
	const static Node NODE_1442598887808[] PROGMEM;
	const static Node NODE_1442598888048[] PROGMEM;
	const static Node NODE_1442598888208[] PROGMEM;
	const static Node NODE_1442598888128[] PROGMEM;
	const static Node NODE_1442598888448[] PROGMEM;
	const static Node NODE_1442598889328[] PROGMEM;
	const static Node NODE_1442598915024[] PROGMEM;
	const static Node NODE_1442598933584[] PROGMEM;
	const static Node NODE_1442598954144[] PROGMEM;
	const static Node NODE_1442598955344[] PROGMEM;
	const static Node NODE_1442598955424[] PROGMEM;
	const static Node NODE_1442598889888[] PROGMEM;
	const static Node NODE_1442598912944[] PROGMEM;
	const static Node NODE_1442598935984[] PROGMEM;
	const static Node NODE_1442598953504[] PROGMEM;
	const static Node NODE_1442598953744[] PROGMEM;
	const static Node NODE_1442598953824[] PROGMEM;
	const static Node NODE_1442598970608[] PROGMEM;
	const static Node NODE_1442598970768[] PROGMEM;
	const static Node NODE_1442599017584[] PROGMEM;
	const static Node NODE_1442599017744[] PROGMEM;
	const static Node NODE_1442599036144[] PROGMEM;
	const static Node NODE_1442599036544[] PROGMEM;
	const static Node NODE_1442599036784[] PROGMEM;
	const static Node NODE_1442599037104[] PROGMEM;

	const static LayeredKey aliases[][2];
	
	LayeredKey getAlias(uint8_t layer, uint8_t key);

	public:
	Compose() : currentNode(const_cast<Node*>(root)){
		//if this assertion fails, the struct in Node has to be reworked for the target architecture
		assert(sizeof(uint16_t) >= sizeof(Node*));
	}
	
	uint16_t transition(uint8_t layer, uint8_t key);
	void reset();
	
	


}; //Compose

#endif //__COMPOSE_H__